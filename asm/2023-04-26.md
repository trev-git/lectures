## Изменение размера числа

Иногда требуется расширить байт до слова с сохранением величины числа.

Если число беззнаковое, то слева приписываются нули (расширение без знака).

AL = 32 = 20h

MOV AH, 0 ; AL = AX \
AX = 0020h

Если число со знаком, то надо учитывать знак числа:

К неотрицательным числам слева приписываются нули - к отрицательным числам слева приписываются двоичные единицы (в шестнадцатеричной системе - FF). Это расширение со знаком.

CBW

Операнд команды находится в регистре AL, а результат в AX.

MOV AL, 32 ; || 20h\
CBW

MOV AL, -32 ; || E0 \
CBW ; FF E0

BX = BX + AL

MOV AH, 00 \
ADD BX, AX

AL = AL div CH

MOV AH, 0 \
DIV CH

Аналогично выполняется расширение слова до двойного слова.

Расширение слова до двойного называется cwd (convert word to double)

Операнд находится в регистре ax, dx - старшие, ax - младшие

Z = XY + X/Y, x,y беззнаковые

```
X db ...
Y db ...
Z dw ?

MOV AL, X
MUL Y
MOV BX, AX ; BX = xy
MOV AL, X ; AL = x
MOV AH, 0 ; AX = x
DIV Y ; AL = x/y
MOV AH, 0 ; ax = x/y
ADD bx, ax
MOV Z, bx
```

f = a/b-cd, abcd - знаковые числа

```
a dw ...
b db ...
c db ...
d db ...
f dw ?

MOV AX, a
IDIV b ; AL = a/b
CBW
MOV BX, AX ; BX = a/b
MOV AL, c
IMUL d ; AX = cd
SUB BX, AX ; a/b - cd
MOV f, bx
```

## Особенности сложения и вычитания

Беззнаковые числа складываются и вычитаются как обычно, только в двоичной системе счисления

Если сумма не вмещается в ячейке, то левая единица (единица переноса) отбрасывается. Во флаг переноса CF записывается 1, и в качестве ответа выдаётся искажённое слово. Если уменьшаемое меньше вычитаемого, разность получается отрицательная, это вне области беззнаковых чисел, то уменьшаемому даётся заём, результат получается неправильным, во флаг переноса CF заносится 1.

Если после сложения или вычитания беззнаковых чисел CF = 1, то ответ неправильный

### Знаковые числа

Если целые со знаком представлены в доп. коде, то складывать и вычитать их можно по алгоритмам для беззнаковых чисел

3+(-1) = 3+2^8-1 = 2^8+2 = 2

-3 + 1 = 2^8-3+1 = 2^8 - 2 = -2

При размере ячеек 8 битов в доп коде представляются числа от -128 до 127, левый бит является знаковым, а на модуль мантиссы отводится 7 правых разрядов. Если модуль числа не помещается в семи разрядах и залезает в знаковый разряд, то говорят, что происходит переполнение мантиссы.

Переполнение мантиссы происходит если:

-складываются числа одного знака и настоящая сумма находится вне диапазона представления
- вычитаются числа разных знаков, и настоящая разность оказывается вне диапазона для представления.

Переполнение мантиссы фиксируется во флаге OF