## Представление команд

Машинные команды ПК занимают от 1 до 6 байтов.

Вид машинной команды

КОП      операнды \
Код \
ОПерации

КОП занимает 1 или 2 байта. В ПК много различных операций, для их представления не хватает 1 байта (256 кодов). Поэтому некоторые операции объединены в группу с одинаковым КОП, во втором байте КОП уточняется, указываются типы операндов.

Команды могут иметь от 0 до 2 операндов.

Операнд может находиться:

- в команде (непосредственный операнд)
- в одном из регистров (в команде указывается этот регистр)
- в ячейке памяти (в команде указывается адрес этой ячейки).

Некоторые команды требуют, чтобы их операнд находился в фиксированном месте, тогда операнд явно не указывается в команде.

Результат выполнения команды помещается в то место, откуда берётся один из операндов. Например, большинство команд реализуют действие:

оп1 := оп1 * оп2

Примеры форматов команд с двумя операндами.

1) Формат "регистр-регистр" (2 байта):

КОП     d w    1 1 reg1 reg2 \
7     2 1 0    7 6 5  3 2  0

reg1 := reg1 * reg2 или reg2 := reg1 * reg2

w = 1, слово; 0, байты

d указывает в какой регистр записывается результат

```
| reg |    w    |
| --- | 0  | 1  |
| 000 | ax | al |
| 001 | cx | cl |
| 010 | dx | dl |
| 011 | bx | bl |
| 100 | sp | ah |
| 101 | bp | ch |
| 110 | si | dh |
| 111 | di | bh |
```

КОП 10 11 101 101

SP := SP * BP

коп 11 11 100 101

2) Формат "регистр-непосредственный операнд" (3-4 байта):

КОП sw 11 КОП' reg im(1-2 байта)

КОП - группа \
КОП' - уточнение операции \
im - непосредственный операнд (1-2 байта), при этом операнд в длину в слово записывается в перевёрнутом виде \
Если s = 0, то im задан байтом \
w = 1, слово; 0, байты

reg := reg * im

КОП 00 11 КОП' 010 0000 0011

КОП 01 11 КОП 110 0000 0001 0000 0000

# Язык ассемблера (ЯА)

Для упрощения составления машинных программ используется язык ассемблера. Программу, написанную на ЯА, передают на вход транслятору (ассемблеру), который переводит её на машинный язык, далее полученную машинную программу выполняют.

Для любой ЭВМ можно придумать разные ЯА (TASM, WASM, FASM). Будем рассматривать язык макроассемблера - MASM (создан фирмой Microsoft), версия 4.0

## Лексемы

Идентификатор - последовательность латинских букв, цифр и знаков ?.@_$ со следующими ограничениями:

- идентификатор не должен начинаться с цифры (7A - ошибка);
- точка может быть только первым символом идентификатора (.A - можно, A. - нельзя)
- большие и малые буквы считаются эквивалентными (AX, Ax, aX, ax)

Идентификаторы делятся на служебные слова и имена. Служебные слова имеют заранее определённый смысл, все остальные идентификаторы - имена.