# Команда пересылки (продолжение)

Если в команде можно определить тип одного из операнда, то он определяет размер пересылаемой величины.

MOV BH, 0 ; пересылка байта \
MOV X, 0 ; пересылка байта \
MOV SI, 0 ; пересылка слова \
MOV Y, 0 ; пересылка слова

Если можно определить размеры обоих операндов, то они должны совпадать.

MOV DI, ES ; пересылка слова
MOV CH, X ; пересылка байта
MOV DX, AL ; ошибка
MOV BH, 300 ; ошибка

Если по операндом MOV нельзя определить размер пересылаемой величины, то тип хотя бы одного из операндов должен быть указан явно.

### Оператор указания типа

  pointer \
тип PTR выражение \
BYTE    константное \
WORD    или \
DWORD   адресное \

BYTE PTR 0 ; ноль как байт \
WORD PTR 0 ; ноль как слово \
BYTE PTR 300 ; ошибка \
WORD PTR A ; адрес A обозначает слово - байты с адресами A и A+1

Оператор PTR используют, когда надо изменить тип операнда.

Z DW 1234h

```
---------
 |34|12|
---------
```

MOV Z, 0 ; ошибка

MOV BYTE PTR Z, 0 

```
---------
 |00|12|
---------
```

MOV BYTE PTR Z+1, 15

1) Поменять местами байтовые переменные X и Y

```
  X Y
-------
 |1|2|
-------

  X Y
-------
 |2|1|
-------
```

X DB 1 \
Y DB 2

MOV AH, X \
MOV AL, Y \
MOV X, AL \
MOV Y, AH 

2) X DB 3 DUP(?)

а)

```
  X
---------
 |1|2|3|
---------
```

MOV X, 1 \
MOV X+1, 2 \
MOV X+2, 3

б)
```
  X
------------
 |x1|x2|x3|
------------

------------
 |x2|x3|x1|
------------
```

MOV AH, X   ; x1 \
MOV AL, X+2 ; x2 \
MOV X+2, AH \
MOV AH, X+1 \
MOV X, AH \
MOV X+1, AL

## Арифметические команды

# Команды сложения и вычитания

ADD оп1, оп2 ; оп1 := оп1 + оп2

SUB оп1, оп2 ; оп1 := оп1 - оп2

Меняются флаги CF, OF, SF, ZF

Операнды должны быть одного типа

Допустимые операнды:

| оп1 | оп2 |
| --- | --- |
| регистр общего назначения | конст. выражение, регистр общего назначения, адресное выражение |
| адресное выражение | регистр общего назначения, константное выражение |

ADD AH, 12 ; AH := AH + 12
SUB SI, Z ; SI := SI - Z
ADD Z, -300 ; Z := Z + (-300)

INC оп ; оп := оп + 1
increment 
DEC оп ; оп := оп - 1
decrement

Операнд может быть адресным выражением или регистром общего назначения.

Команды, аналогичные командам ADD и SUB, но не меняют CF

INC BL
DEC WORD PTR A

Команда изменения знака

NEG оп ; оп := -оп

Операнд может быть регистром общего назначения или адресным выражением.

MOV AL, 1
NEG AL ; AL := -1 (FF)

Особый случай:

оп := -128
В этом случае оп не меняется, т.к. нет числа знакового числа +128. В этом случае OF = 1, при других операндах OF = 0. При нулевом операнде CF = 0, при других CF = 1, SF, ZF изменяются как обычно

Z = X - 3 + y

X DB ... \
Y DB ... \
Z DB ?

MOV AL, X ; AL := X \
SUB AL, 3 ; AL := AL - 3 = X - 3 \
ADD AL, y ; AL := AL + y = X - 3 + y \
MOV Z, AL

C = -a + b - 1

A DW ... \
B DW ... \
C DW ?

MOV AX, A ; AX := A = a \
NEG AX ; AX := -AX = -a \
ADD AX, B ; AX := AX + B = -a + b \
DEC AX ; AX := AX - 1 = -a + b - 1 \
MOV C, AX

## Команды умножения

Умножение целых без знака MUL

MUL оп

Умножение целых со знаком IMUL

IMUL оп

оп := регистр общего назначения или адресное выражение

| Множитель 1 | Множитель 2 | Произведение |
| --- | --- | --- |
| AL | байт | AX |
| AX | слово | (DX, AX) |